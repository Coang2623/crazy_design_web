import{j as e,H as t}from"./index-i6lRcEgf.js";import{r as a,d as s,e as r,N as n,L as l}from"./vendor-kwcT8rmp.js";import{p as o}from"./projects-DQdfnkvY.js";import{u as i}from"./useMDX-D1lQNDbl.js";import{F as c}from"./FadeIn-D-OfTxrf.js";import{u as d}from"./i18n-DifT0YVf.js";function m({images:t=[],initialIndex:s=0,isOpen:r,onClose:n}){const[l,o]=a.useState(s),[i,c]=a.useState(!1);a.useEffect(()=>{o(s)},[s,r]),a.useEffect(()=>{if(!r)return;const e=e=>{"Escape"===e.key&&n(),"ArrowLeft"===e.key&&o(e=>e>0?e-1:t.length-1),"ArrowRight"===e.key&&o(e=>e<t.length-1?e+1:0)};return document.addEventListener("keydown",e),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",e),document.body.style.overflow=""}},[r,t.length,n]);const[d,m]=a.useState(null),x=a.useCallback(e=>m(e.touches[0].clientX),[]),g=a.useCallback(e=>{if(null===d)return;const a=d-e.changedTouches[0].clientX;Math.abs(a)>50&&o(a>0?e=>e<t.length-1?e+1:0:e=>e>0?e-1:t.length-1),m(null)},[d,t.length]);return r&&0!==t.length?e.jsxs("div",{className:"fixed inset-0 z-[100] bg-black/95 flex items-center justify-center",onClick:n,onTouchStart:x,onTouchEnd:g,children:[e.jsx("button",{className:"absolute top-4 right-4 text-white/70 hover:text-white z-10 transition-colors",onClick:n,"aria-label":"Close lightbox",children:e.jsx("span",{className:"material-icons text-3xl",children:"close"})}),e.jsxs("div",{className:"absolute top-4 left-4 text-white/50 text-sm font-mono z-10",children:[l+1," / ",t.length]}),t.length>1&&e.jsx("button",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-white/50 hover:text-white transition-colors z-10",onClick:e=>{e.stopPropagation(),o(e=>e>0?e-1:t.length-1)},"aria-label":"Previous image",children:e.jsx("span",{className:"material-icons text-4xl",children:"chevron_left"})}),e.jsx("img",{src:t[l],alt:`Gallery image ${l+1}`,className:"max-h-[90vh] max-w-[90vw] object-contain transition-transform duration-300 select-none "+(i?"scale-150 cursor-zoom-out":"cursor-zoom-in"),onClick:e=>{e.stopPropagation(),c(!i)},draggable:!1}),t.length>1&&e.jsx("button",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-white/50 hover:text-white transition-colors z-10",onClick:e=>{e.stopPropagation(),o(e=>e<t.length-1?e+1:0)},"aria-label":"Next image",children:e.jsx("span",{className:"material-icons text-4xl",children:"chevron_right"})}),t.length>1&&e.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2 z-10",children:t.map((t,a)=>e.jsx("button",{onClick:e=>{e.stopPropagation(),o(a)},className:"w-12 h-12 rounded overflow-hidden border-2 transition-all "+(a===l?"border-white scale-110":"border-transparent opacity-50 hover:opacity-80"),children:e.jsx("img",{src:t,alt:"",className:"w-full h-full object-cover"})},a))})]}):null}function x(){const{slug:x}=s(),{t:g,i18n:h}=d(),u=r(),[p,j]=a.useState(!1),[y,b]=a.useState(0),f=o.find(e=>e.slug===x);if(a.useEffect(()=>{if(f&&f.language!==h.language){const e=o.find(e=>e.translationKey===f.translationKey&&e.language===h.language);e&&u(`/projects/${e.slug}`,{replace:!0})}},[h.language,f,u]),!f)return e.jsx(n,{to:"/projects",replace:!0});const v=i(f.content),N=Math.ceil(f.content.length/1e3)||4,k=[f.coverImage,...f.images||[]].filter(Boolean),w=e=>{b(e),j(!0)};return e.jsxs(e.Fragment,{children:[e.jsxs(t,{children:[e.jsxs("title",{children:[f.title," | Crazydesign"]}),e.jsx("meta",{name:"description",content:f.summary})]}),e.jsx("article",{className:"min-h-screen pt-32 pb-32 md:pt-40 md:pb-40 bg-white dark:bg-gray-900 transition-colors duration-300",children:e.jsxs("div",{className:"max-w-[720px] mx-auto px-5 sm:px-6",children:[e.jsx("header",{className:"mb-12",children:e.jsxs(c,{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(l,{to:"/projects",className:"text-xs font-medium uppercase tracking-wider text-gray-400 dark:text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 transition-colors",children:g("common.backToProjects")}),e.jsx("span",{className:"text-gray-300 dark:text-gray-700",children:"·"}),f.tags.slice(0,2).map(t=>e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider text-gray-500 dark:text-gray-400",children:t},t))]}),e.jsx("h1",{className:"font-sans font-black text-4xl sm:text-5xl md:text-[3.5rem] leading-[1.1] tracking-tight mb-6 text-gray-900 dark:text-gray-50",children:f.title}),e.jsx("p",{className:"font-article text-xl text-gray-500 dark:text-gray-400 leading-relaxed mb-8",children:f.summary}),e.jsxs("div",{className:"flex items-center justify-between border-t border-b border-gray-100 dark:border-gray-800 py-5",children:[e.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{className:"flex items-center gap-1.5 font-medium",children:[e.jsx("span",{className:"material-icons text-base",children:"calendar_today"}),new Date(f.date).toLocaleDateString(h.language,{month:"short",day:"numeric",year:"numeric"})]}),e.jsxs("span",{className:"flex items-center gap-1.5 font-medium",children:[e.jsx("span",{className:"material-icons text-base",children:"schedule"}),N," min read"]})]}),e.jsxs("div",{className:"flex gap-3 text-gray-400 dark:text-gray-500",children:[e.jsx("button",{className:"material-icons text-xl hover:text-gray-700 dark:hover:text-gray-300 transition-colors",children:"bookmark_border"}),e.jsx("button",{className:"material-icons text-xl hover:text-gray-700 dark:hover:text-gray-300 transition-colors",children:"share"})]})]})]})}),e.jsx(c,{delay:200,children:e.jsxs("div",{className:"article-prose font-article",children:[f.coverImage&&e.jsx("figure",{className:"-mx-5 sm:-mx-8 md:-mx-20 mb-10",children:e.jsx("img",{src:f.coverImage,alt:f.title,className:"w-full h-auto object-cover sm:rounded-md cursor-pointer hover:opacity-90 transition-opacity",loading:"lazy",decoding:"async",onClick:()=>w(0)})}),v?e.jsx(v,{}):e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary-500"})})]})}),k.length>1&&e.jsx(c,{delay:300,children:e.jsxs("div",{className:"mt-12 pt-8 border-t border-gray-100 dark:border-gray-800",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"material-icons text-primary-500",children:"photo_library"}),"vi"===h.language?"Thư viện ảnh":"Photo Gallery"]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:k.map((t,a)=>e.jsx("button",{onClick:()=>w(a),className:"aspect-square rounded-lg overflow-hidden group cursor-pointer",children:e.jsx("img",{src:t,alt:`${f.title} - ${a+1}`,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",loading:"lazy",decoding:"async"})},a))})]})}),e.jsx("div",{className:"mt-16 pt-8 border-t border-gray-100 dark:border-gray-800",children:e.jsx("div",{className:"flex flex-wrap gap-2 mb-10",children:f.tags.map(t=>e.jsx("span",{className:"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 px-4 py-2 rounded-full text-sm font-medium hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors cursor-pointer",children:t},t))})}),e.jsx("div",{className:"flex justify-center",children:e.jsxs(l,{to:"/projects",className:"text-gray-500 hover:text-gray-900 dark:hover:text-white flex items-center gap-2 transition-colors font-sans font-medium text-sm",children:[e.jsx("span",{className:"material-icons text-sm",children:"west"}),g("common.backToProjects")]})})]})}),e.jsx(m,{images:k,initialIndex:y,isOpen:p,onClose:()=>j(!1)})]})}export{x as default};
